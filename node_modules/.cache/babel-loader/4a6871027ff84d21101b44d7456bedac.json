{"ast":null,"code":"import _slicedToArray from\"/home/sailoroncanvas/final_project/ewha-react-publishing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{TextField}from'../components/TextField';import{useHistory}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LoginPage=function LoginPage(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useHistory=useHistory(),push=_useHistory.push,replace=_useHistory.replace;var checkUser=function checkUser(){if(email===\"\"||password===\"\"){alert(\"아이디와 비밀번호를 입력해주세요\");}axios.post('http://localhost:1337/api/auth/local',{identifier:email,password:password}).then(function(response){// Handle success.\nconsole.log('Well done!');console.log('User token',response.data.jwt);localStorage.setItem(\"token\",response.data.jwt);replace(\"/\");}).catch(function(error){// Handle error.\nconsole.log('An error occurred:',error.response);});};useEffect(function(){if(localStorage.getItem(\"token\")){replace(\"/\");}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"m-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl font-bold mb-10 text-center mt-32 font-lobster text-cyan-300\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(TextField,{placeholder:\"\\uC774\\uBA54\\uC77C\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",label:\"\\uC774\\uBA54\\uC77C\",value:email,onChange:function onChange(event){setEmail(event.target.value);}})}),/*#__PURE__*/_jsx(TextField,{label:\"\\uBE44\\uBC00\\uBC88\\uD638\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",type:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-cyan-800 text-white text-center py-4 rounded-full\",onClick:function onClick(){checkUser();},children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4 text-color-gray-800 border-gray-800 border mt-2 rounded-full\",children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"})]})]});};","map":{"version":3,"sources":["/home/sailoroncanvas/final_project/ewha-react-publishing/src/pages/LoginPage.tsx"],"names":["React","useEffect","useState","TextField","useHistory","axios","LoginPage","email","setEmail","password","setPassword","push","replace","checkUser","alert","post","identifier","then","response","console","log","data","jwt","localStorage","setItem","catch","error","getItem","event","target","value"],"mappings":"8IAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,yBAA1B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAGA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAC7B,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAAgCN,QAAQ,CAAC,EAAD,CAAxC,yCAAOO,QAAP,eAAiBC,WAAjB,eACA,gBAA0BN,UAAU,EAApC,CAAQO,IAAR,aAAQA,IAAR,CAAcC,OAAd,aAAcA,OAAd,CAQA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAIN,KAAK,GAAK,EAAV,EAAgBE,QAAQ,GAAK,EAAjC,CAAqC,CACnCK,KAAK,CAAC,mBAAD,CAAL,CACD,CAGDT,KAAK,CACFU,IADH,CACQ,sCADR,CACgD,CAC5CC,UAAU,CAAET,KADgC,CAE5CE,QAAQ,CAAEA,QAFkC,CADhD,EAKGQ,IALH,CAKQ,SAACC,QAAD,CAAc,CAClB;AACAC,OAAO,CAACC,GAAR,CAAY,YAAZ,EACAD,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BF,QAAQ,CAACG,IAAT,CAAcC,GAAxC,EACAC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BN,QAAQ,CAACG,IAAT,CAAcC,GAA5C,EACAV,OAAO,CAAC,GAAD,CAAP,CACD,CAXH,EAYGa,KAZH,CAYS,SAACC,KAAD,CAAW,CAChB;AACAP,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkCM,KAAK,CAACR,QAAxC,EACD,CAfH,EAiBD,CAvBD,CAyBAjB,SAAS,CAAC,UAAM,CACd,GAAIsB,YAAY,CAACI,OAAb,CAAqB,OAArB,CAAJ,CAAmC,CACjCf,OAAO,CAAC,GAAD,CAAP,CACD,CACF,CAJQ,CAIN,EAJM,CAAT,CAOA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,uEAAf,mBADF,cAEE,oCACE,YAAK,SAAS,CAAC,MAAf,uBACE,KAAC,SAAD,EACE,WAAW,CAAC,gEADd,CAEE,KAAK,CAAC,oBAFR,CAGE,KAAK,CAAEL,KAHT,CAIE,QAAQ,CAAE,kBAACqB,KAAD,CAAW,CACnBpB,QAAQ,CAACoB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR,CACD,CANH,EADF,EADF,cAYE,KAAC,SAAD,EACE,KAAK,CAAC,0BADR,CAEE,WAAW,CAAC,sEAFd,CAGE,IAAI,CAAC,UAHP,CAIE,KAAK,CAAErB,QAJT,CAKE,QAAQ,CAAE,kBAACmB,KAAD,QAAWlB,CAAAA,WAAW,CAACkB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAtB,EALZ,EAZF,GAFF,cAsBE,aAAK,SAAS,CAAC,OAAf,wBACE,YACE,SAAS,CAAC,sDADZ,CAEE,OAAO,CAAE,kBAAM,CACbjB,SAAS,GACV,CAJH,gCADF,cASE,YAAK,SAAS,CAAC,+EAAf,sCATF,GAtBF,GADF,CAsCD,CAjFM","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { TextField } from '../components/TextField';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\n\n\nexport const LoginPage = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const { push, replace } = useHistory();\n\n\n\n\n\n\n\n  const checkUser = () => {\n    if (email === \"\" || password === \"\") {\n      alert(\"아이디와 비밀번호를 입력해주세요\");\n    }\n\n\n    axios\n      .post('http://localhost:1337/api/auth/local', {\n        identifier: email,\n        password: password,\n      })\n      .then((response) => {\n        // Handle success.\n        console.log('Well done!');\n        console.log('User token', response.data.jwt);\n        localStorage.setItem(\"token\", response.data.jwt);\n        replace(\"/\");\n      })\n      .catch((error) => {\n        // Handle error.\n        console.log('An error occurred:', error.response);\n      });\n\n  }\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\")) {\n      replace(\"/\");\n    }\n  }, [])\n\n\n  return (\n    <div className=\"m-4\">\n      <div className=\"text-4xl font-bold mb-10 text-center mt-32 font-lobster text-cyan-300\">Login</div>\n      <div>\n        <div className=\"mb-4\">\n          <TextField\n            placeholder=\"이메일을 입력해주세요.\"\n            label=\"이메일\"\n            value={email}\n            onChange={(event) => {\n              setEmail(event.target.value);\n            }}\n          />\n        </div>\n\n        <TextField\n          label=\"비밀번호\"\n          placeholder=\"비밀번호를 입력해주세요.\"\n          type=\"password\"\n          value={password}\n          onChange={(event) => setPassword(event.target.value)} />\n      </div>\n\n      <div className=\"mt-10\">\n        <div\n          className=\"bg-cyan-800 text-white text-center py-4 rounded-full\"\n          onClick={() => {\n            checkUser();\n          }}\n        >\n          로그인\n        </div>\n        <div className=\"text-center py-4 text-color-gray-800 border-gray-800 border mt-2 rounded-full\">\n          회원가입\n        </div>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}